"use strict";(globalThis.webpackChunkamigo_docs=globalThis.webpackChunkamigo_docs||[]).push([[570],{1551:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"manual/define-problem/constraints","title":"Constraints","description":"Constraints define the feasible region for your optimization problem. They specify conditions that must be satisfied by the solution.","source":"@site/docs/manual/define-problem/constraints.md","sourceDirName":"manual/define-problem","slug":"/manual/define-problem/constraints","permalink":"/amigo/docs/manual/define-problem/constraints","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Variables","permalink":"/amigo/docs/manual/define-problem/variables"},"next":{"title":"Objectives","permalink":"/amigo/docs/manual/define-problem/objectives"}}');var i=s(4848),a=s(8453);const o={sidebar_position:3},r="Constraints",l={},c=[{value:"Constraint Declaration",id:"constraint-declaration",level:2},{value:"Equality Constraints",id:"equality-constraints",level:2},{value:"Inequality Constraints",id:"inequality-constraints",level:2},{value:"One-Sided Inequalities",id:"one-sided-inequalities",level:3},{value:"Bounded Inequalities",id:"bounded-inequalities",level:3},{value:"Vector Constraints",id:"vector-constraints",level:2},{value:"Example: Structural Component",id:"example-structural-component",level:2},{value:"Constraint Linking",id:"constraint-linking",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"constraints",children:"Constraints"})}),"\n",(0,i.jsx)(n.p,{children:"Constraints define the feasible region for your optimization problem. They specify conditions that must be satisfied by the solution."}),"\n",(0,i.jsx)(n.h2,{id:"constraint-declaration",children:"Constraint Declaration"}),"\n",(0,i.jsxs)(n.p,{children:["Constraints are declared in the component constructor using ",(0,i.jsx)(n.code,{children:"add_constraint"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self.add_constraint(name, value=None, lower=0.0, upper=0.0, \n                   shape=None, units=None, label=None)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"equality-constraints",children:"Equality Constraints"}),"\n",(0,i.jsxs)(n.p,{children:["Equality constraints enforce that a function equals a specific value. In Amigo, this is specified by setting ",(0,i.jsx)(n.code,{children:"lower"})," and ",(0,i.jsx)(n.code,{children:"upper"})," to the same value:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# h(x) = 0\nself.add_constraint("balance", value=0.0, lower=0.0, upper=0.0)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"value"})," parameter provides the target value, while ",(0,i.jsx)(n.code,{children:"lower"})," and ",(0,i.jsx)(n.code,{children:"upper"})," being equal enforces the equality."]}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.code,{children:"compute()"})," method, set the constraint value:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def compute(self):\n    x = self.inputs["x"]\n    \n    # Constraint: x^2 - 1 = 0\n    self.constraints["balance"] = x**2 - 1.0\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["By default, ",(0,i.jsx)(n.code,{children:"add_constraint"})," creates an equality constraint with ",(0,i.jsx)(n.code,{children:"lower=0.0"})," and ",(0,i.jsx)(n.code,{children:"upper=0.0"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"inequality-constraints",children:"Inequality Constraints"}),"\n",(0,i.jsx)(n.h3,{id:"one-sided-inequalities",children:"One-Sided Inequalities"}),"\n",(0,i.jsx)(n.p,{children:"Upper bound constraint (g(x) \u2264 0):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Declare: stress \u2264 \u03c3_yield  \u2192  stress - \u03c3_yield \u2264 0\nself.add_constraint("stress", upper=0.0)\n\n# Compute\ndef compute(self):\n    stress = self.compute_stress()\n    sigma_y = self.constants["sigma_y"]\n    self.constraints["stress"] = stress - sigma_y\n'})}),"\n",(0,i.jsx)(n.p,{children:"Lower bound constraint (g(x) \u2265 0):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Declare: clearance \u2265 0\nself.add_constraint("clearance", lower=0.0, upper=float("inf"))\n\n# Compute\ndef compute(self):\n    gap = self.compute_gap()\n    self.constraints["clearance"] = gap\n'})}),"\n",(0,i.jsx)(n.h3,{id:"bounded-inequalities",children:"Bounded Inequalities"}),"\n",(0,i.jsx)(n.p,{children:"Double-sided constraints (lower \u2264 g(x) \u2264 upper):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'self.add_constraint("temperature", lower=20.0, upper=100.0)\n\ndef compute(self):\n    T = self.compute_temperature()\n    self.constraints["temperature"] = T\n'})}),"\n",(0,i.jsx)(n.h2,{id:"vector-constraints",children:"Vector Constraints"}),"\n",(0,i.jsxs)(n.p,{children:["Define multiple constraints simultaneously using the ",(0,i.jsx)(n.code,{children:"shape"})," parameter:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# System of 4 equality constraints\nself.add_constraint("residual", shape=(4,), value=0.0, \n                   lower=0.0, upper=0.0)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Set vector constraint values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def compute(self):\n    # Compute 4 residual equations\n    res = [None] * 4\n    res[0] = self.inputs["q"][0] - self.inputs["qdot"][0]\n    res[1] = self.inputs["q"][1] - self.inputs["qdot"][1]\n    res[2] = ... \n    res[3] = ...\n    \n    self.constraints["residual"] = res\n'})}),"\n",(0,i.jsx)(n.h2,{id:"example-structural-component",children:"Example: Structural Component"}),"\n",(0,i.jsx)(n.p,{children:"A complete example with multiple constraint types:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import amigo as am\n\nclass BeamComponent(am.Component):\n    def __init__(self):\n        super().__init__()\n        \n        # Constants\n        self.add_constant("sigma_y", value=250e6)  # Yield strength [Pa]\n        self.add_constant("E", value=200e9)        # Young\'s modulus [Pa]\n        \n        # Inputs\n        self.add_input("force", value=1000.0, units="N")\n        self.add_input("area", value=0.01, lower=0.001, upper=0.1, units="m^2")\n        \n        # Constraints\n        self.add_constraint("stress_limit", upper=0.0)    # \u03c3 \u2264 \u03c3_y\n        self.add_constraint("min_thickness", lower=0.0)   # t \u2265 t_min\n        \n        # Objective\n        self.add_objective("mass", units="kg")\n    \n    def compute(self):\n        F = self.inputs["force"]\n        A = self.inputs["area"]\n        sigma_y = self.constants["sigma_y"]\n        \n        # Compute stress\n        stress = F / A\n        \n        # Stress constraint: \u03c3 - \u03c3_y \u2264 0\n        self.constraints["stress_limit"] = stress - sigma_y\n        \n        # Minimum thickness constraint: A - A_min \u2265 0\n        self.constraints["min_thickness"] = A - 0.001\n        \n        # Minimize mass (proportional to area)\n        self.objective["mass"] = A * 7850.0 * 1.0  # \u03c1 * A * L\n'})}),"\n",(0,i.jsx)(n.h2,{id:"constraint-linking",children:"Constraint Linking"}),"\n",(0,i.jsx)(n.p,{children:"When constraints from different components are linked, their values are summed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# In component 1\nself.constraints["total_force"] = force1\n\n# In component 2  \nself.constraints["total_force"] = force2\n\n# After linking: total_force = force1 + force2\nmodel.link("comp1.total_force", "comp2.total_force")\n'})}),"\n",(0,i.jsx)(n.p,{children:"This is useful for enforcing global constraints across multiple components."})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(6540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);